<div class="fourversion_roulette">
  <div class="roulette-container">
    <div class="roulettewrapper">
      <div class= "foundation_roulettes">
        <div class="foundation_quarter" id="f_quarter_1"></div>
        <div class="foundation_quarter" id="f_quarter_2"></div>
        <div class="foundation_quarter" id="f_quarter_3"></div>
        <div class="foundation_quarter" id="f_quarter_4"></div>
      </div>
    </div>
    <div class="roulettewrapper_top">
      <div class= "top_roulettes" id="roulettes4">
        <div class="top_quarter" id="t_quarter_1"></div>
        <div class="top_quarter" id="t_quarter_2"></div>
        <div class="top_quarter" id="t_quarter_3"></div>
        <div class="top_quarter" id="t_quarter_4"></div>
      </div>
    </div>
    <%= form_with url: "#", class: "todoform", method: :get, local: true do |f| %>
      <div class="taskform1"><%= f.text_field :form1 , placeholder: "タスクを記入" %></div>
      <div class="taskform1"><%= f.text_field :form2 , placeholder: "タスクを記入"%></div>
      <div class="taskform1"><%= f.text_field :form3 , placeholder: "タスクを記入"%></div>
      <div class="taskform1"><%= f.text_field :form4 , placeholder: "タスクを記入"%></div>
      <div class="nameform1"><%= f.text_field :form5 , placeholder: "名前を記入"%></div>
      <div class="nameform2"><%= f.text_field :form6 , placeholder: "名前を記入"%></div>
      <div class="nameform3"><%= f.text_field :form7 , placeholder: "名前を記入"%></div>
      <div class="nameform4"><%= f.text_field :form8 , placeholder: "名前を記入"%></div>
      <%= f.submit "ToDoリストを作成", class: "btn_todo" %>
    <% end %>
    <div class="roulettebutton">
      <div class="tow_buttons">
        <%= button_to "スタート", "#", {method: :get, id: "start4", class: "myButton"} %>
        <%= button_to "ストップ", "#", {method: :get, id: "stop4", class: "myButton"} %>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  const start = document.getElementById('start4');
  const stop = document.getElementById('stop4');
  const roulettes = document.getElementById('roulettes4');

  let deg = 0;
  let speed = 0;
  let move = false;

  start.addEventListener('click', () => {
    if(!move) {
      move = true;
      speed = 90;
      rotate();
    }
  });

  stop.addEventListener('click', () => {
    if(move) {
      move = false;
    }
  });

  function rotate() {
    deg += speed;
    if(move) {
      roulettes.style.transform = `rotate(${deg}deg)`;
      requestAnimationFrame(rotate);
    }
  }
</script>
